# TTS è°ƒè¯•ç•Œé¢ UI è¿ç§»æ€»ç»“

## ğŸ“‹ æ¦‚è¿°

å°† `DebugTTSBasicFragment` çš„ UI å¸ƒå±€è¿ç§»åˆ° Compose ç‰ˆæœ¬ `DebugTTSBasicView`ï¼Œç¡®ä¿ä¸¤è€…çš„ UI å¸ƒå±€å°½å¯èƒ½ä¸€è‡´ã€‚

---

## ğŸ¯ è¿ç§»ç›®æ ‡

1. **ä¿æŒ UI å¸ƒå±€ä¸€è‡´æ€§**ï¼šCompose ç‰ˆæœ¬åº”å°½å¯èƒ½è¿˜åŸåŸå§‹ Fragment çš„å¸ƒå±€
2. **ä¿æŒåŠŸèƒ½å®Œæ•´æ€§**ï¼šæ‰€æœ‰åŠŸèƒ½éƒ½åº”æ­£å¸¸å·¥ä½œ
3. **ç¬¦åˆ Compose æœ€ä½³å®è·µ**ï¼šä½¿ç”¨ Material 3 ç»„ä»¶å’Œ Compose é£æ ¼

---

## ğŸ“Š UI å¸ƒå±€å¯¹æ¯”

### åŸå§‹ Fragment å¸ƒå±€ç‰¹ç‚¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çŠ¶æ€ä¿¡æ¯ï¼ˆTextViewï¼‰                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æµ‹è¯•æ–‡æœ¬è¾“å…¥ï¼ˆEditTextï¼‰              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¼•å¯¼æç¤ºï¼ˆTextView - çº¢è‰²ï¼‰           â”‚
â”‚ [ä¸‹è½½å¹¶å®‰è£…è¯­éŸ³å¼•æ“] æŒ‰é’®             â”‚
â”‚ [è®¾ç½®è¯­éŸ³å¼•æ“] æŒ‰é’®                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ’­æ”¾è¯­éŸ³] æŒ‰é’®                       â”‚
â”‚ [ä¸‹è½½è¯­éŸ³] æŒ‰é’®                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åŠ å¿«è¯­é€Ÿ] [å‡æ…¢è¯­é€Ÿ]                 â”‚
â”‚ [å‡é«˜éŸ³è°ƒ] [é™ä½éŸ³è°ƒ]                 â”‚
â”‚ [å¢åŠ éŸ³é‡] [é™ä½éŸ³é‡]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤‡æ³¨è¯´æ˜ï¼ˆTextViewï¼‰                  â”‚
â”‚ [é¡ºåºæ’­æ”¾] [ä¸‹ä¸€ä¸ªæ’­æ”¾]               â”‚
â”‚ [é©¬ä¸Šæ’­æ”¾] [æ’­æ”¾å¹¶æ¸…ç©ºå‰©ä¸‹çš„]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–° Compose ç‰ˆæœ¬å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çŠ¶æ€ä¿¡æ¯ï¼ˆTextï¼‰                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æµ‹è¯•æ–‡æœ¬è¾“å…¥ï¼ˆOutlinedTextFieldï¼‰     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¼•å¯¼æç¤ºï¼ˆText - çº¢è‰²ï¼‰               â”‚
â”‚ [ä¸‹è½½å¹¶å®‰è£…è¯­éŸ³å¼•æ“] Button           â”‚
â”‚ [è®¾ç½®è¯­éŸ³å¼•æ“] Button                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ’­æ”¾è¯­éŸ³] Button                     â”‚
â”‚ [ä¸‹è½½è¯­éŸ³] Button                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [åŠ å¿«è¯­é€Ÿ] [å‡æ…¢è¯­é€Ÿ]                 â”‚
â”‚ [å‡é«˜éŸ³è°ƒ] [é™ä½éŸ³è°ƒ]                 â”‚
â”‚ [å¢åŠ éŸ³é‡] [é™ä½éŸ³é‡]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤‡æ³¨è¯´æ˜ï¼ˆTextï¼‰                      â”‚
â”‚ [é¡ºåºæ’­æ”¾] [ä¸‹ä¸€ä¸ªæ’­æ”¾]               â”‚
â”‚ [é©¬ä¸Šæ’­æ”¾] [æ’­æ”¾å¹¶æ¸…ç©ºå‰©ä¸‹çš„]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ä¸»è¦æ”¹è¿›ç‚¹

### 1. **å¸ƒå±€ç»“æ„ä¼˜åŒ–**

**ä¹‹å‰ï¼ˆç¬¬ä¸€ç‰ˆ Composeï¼‰**ï¼š
- ä½¿ç”¨ `DebugContent` + `DebugItem` å•åˆ—å¸ƒå±€
- æ‰€æœ‰æŒ‰é’®å‚ç›´æ’åˆ—
- å ç”¨ç©ºé—´å¤§ï¼Œéœ€è¦æ›´å¤šæ»šåŠ¨

**ç°åœ¨ï¼ˆæ”¹è¿›åï¼‰**ï¼š
- ä½¿ç”¨ `DebugContent` + `Column` + `Row` ç»„åˆå¸ƒå±€
- æŒ‰é’®æˆå¯¹æ°´å¹³æ’åˆ—ï¼ˆä½¿ç”¨ `Row` + `weight(1f)`ï¼‰
- å¸ƒå±€æ›´ç´§å‡‘ï¼Œä¸åŸå§‹ Fragment ä¸€è‡´

### 2. **é—´è·è°ƒæ•´**

```kotlin
// ä¿æŒä¸åŸå§‹ XML ä¸€è‡´çš„é—´è·
Column(
    modifier = Modifier
        .fillMaxWidth()
        .padding(20.dp)  // å¯¹åº” XML çš„ android:padding="20dp"
) {
    Text(
        modifier = Modifier.padding(top = 20.dp, bottom = 30.dp)  // å¯¹åº” XML çš„ layout_marginTop
    )
    
    OutlinedTextField(
        modifier = Modifier.padding(bottom = 30.dp)
    )
}
```

### 3. **æŒ‰é’®å¸ƒå±€**

**æˆå¯¹æŒ‰é’®ä½¿ç”¨ Row + weight**ï¼š
```kotlin
Row(
    modifier = Modifier.fillMaxWidth(),
    horizontalArrangement = Arrangement.spacedBy(8.dp)
) {
    Button(
        onClick = { /* åŠ å¿«è¯­é€Ÿ */ },
        modifier = Modifier.weight(1f)
    ) {
        Text("åŠ å¿«è¯­é€Ÿ")
    }

    Button(
        onClick = { /* å‡æ…¢è¯­é€Ÿ */ },
        modifier = Modifier.weight(1f)
    ) {
        Text("å‡æ…¢è¯­é€Ÿ")
    }
}
```

### 4. **æ–‡æœ¬æ ·å¼**

| å…ƒç´  | Fragment (XML) | Compose |
|------|----------------|---------|
| çŠ¶æ€ä¿¡æ¯ | `textSize="18dp"` | `MaterialTheme.typography.titleMedium` |
| æµ‹è¯•æ–‡æœ¬ | `textSize="20dp"` | `MaterialTheme.typography.bodyLarge` |
| å¼•å¯¼æç¤º | `textColor="#FF0000"` | `color = MaterialTheme.colorScheme.error` |
| å¤‡æ³¨è¯´æ˜ | `textSize="16dp"` | `MaterialTheme.typography.bodyMedium` |

### 5. **é»˜è®¤æµ‹è¯•æ–‡æœ¬**

ä¿æŒä¸åŸå§‹ Fragment ä¸€è‡´ï¼š
```kotlin
var testText by remember { 
    mutableStateOf("ä¸Šè½¦ã€ä¸Šè½¦ï¼Œä¸Šæ˜Ÿã€‚ä¸Šåˆ†#ä¸Šè½¦|ä¸Šè½¦ï¼›ä¸Šæ˜Ÿ:ä¸Šåˆ†") 
}
```

### 6. **TTS å¼•æ“åˆå§‹åŒ–**

ä¿æŒä¸åŸå§‹ Fragment ä¸€è‡´ï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤å¼•æ“ï¼š
```kotlin
LibTTS.init(
    context.applicationContext,
    Locale.CHINA,
    "",  // ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ TTS å¼•æ“ï¼ˆå¯¹åº” Fragment çš„ nullï¼‰
    object : TTSImpl.TTSInitListener { ... }
)
```

---

## ğŸ“ ä»£ç å¯¹æ¯”

### çŠ¶æ€ä¿¡æ¯æ˜¾ç¤º

**Fragment**:
```kotlin
private val FORMAT = "è¯­éŸ³æ’­æŠ¥æµ‹è¯•ï¼šè¯­é€Ÿ %s,è¯­è°ƒ %s,éŸ³é‡ %sï¼Œæœ€å¤§ID %s "

view!!.findViewById<TextView>(R.id.tts_title)?.text =
    String.format(
        FORMAT,
        LibTTS.getConfigSpeechRate(),
        LibTTS.getConfigPitch(),
        LibTTS.getConfigVoiceVolume(),
        times
    )
```

**Compose**:
```kotlin
private const val FORMAT = "è¯­éŸ³æ’­æŠ¥æµ‹è¯•ï¼šè¯­é€Ÿ %.1fï¼Œè¯­è°ƒ %.1fï¼ŒéŸ³é‡ %dï¼Œæ’­æŠ¥æ¬¡æ•° %d"

LaunchedEffect(times) {
    ttsInfo = String.format(
        FORMAT,
        LibTTS.getConfigSpeechRate(),
        LibTTS.getConfigPitch(),
        LibTTS.getConfigVoiceVolume(),
        times
    )
}

Text(
    text = ttsInfo,
    style = MaterialTheme.typography.titleMedium,
    modifier = Modifier.padding(top = 20.dp, bottom = 30.dp)
)
```

### æŒ‰é’®ç‚¹å‡»äº‹ä»¶

**Fragment**:
```kotlin
view!!.findViewById<Button>(R.id.tts_voice_incre)?.setOnClickListener {
    LibTTS.setSpeechRate(LibTTS.getConfigSpeechRate() + 0.1f)
    updateTTSTitle()
}
```

**Compose**:
```kotlin
Button(
    onClick = {
        LibTTS.setSpeechRate(LibTTS.getConfigSpeechRate() + 0.1f)
        times++  // è§¦å‘ LaunchedEffect æ›´æ–°çŠ¶æ€
    },
    modifier = Modifier.weight(1f)
) {
    Text("åŠ å¿«è¯­é€Ÿ")
}
```

---

## âœ… åŠŸèƒ½éªŒè¯æ¸…å•

- [x] TTS åˆå§‹åŒ–æ­£å¸¸
- [x] çŠ¶æ€ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
- [x] æµ‹è¯•æ–‡æœ¬è¾“å…¥æ­£å¸¸
- [x] å¼•å¯¼æç¤ºæ˜¾ç¤º/éšè—é€»è¾‘æ­£ç¡®
- [x] ä¸‹è½½ TTS å¼•æ“åŠŸèƒ½æ­£å¸¸
- [x] TTS è®¾ç½®è·³è½¬æ­£å¸¸
- [x] æ’­æ”¾è¯­éŸ³åŠŸèƒ½æ­£å¸¸
- [x] ä¿å­˜éŸ³é¢‘æ–‡ä»¶åŠŸèƒ½æ­£å¸¸
- [x] è¯­é€Ÿè°ƒæ•´åŠŸèƒ½æ­£å¸¸
- [x] è¯­è°ƒè°ƒæ•´åŠŸèƒ½æ­£å¸¸
- [x] éŸ³é‡è°ƒæ•´åŠŸèƒ½æ­£å¸¸
- [x] å„ç§æ’­æŠ¥æ¨¡å¼æ­£å¸¸ï¼ˆé¡ºåºã€ä¸‹ä¸€ä¸ªã€é©¬ä¸Šã€æ¸…ç©ºï¼‰
- [x] æ’­æŠ¥ç›‘å¬å›è°ƒæ­£å¸¸
- [x] å®šæ—¶ä»»åŠ¡æ­£å¸¸

---

## ğŸ¨ UI ä¸€è‡´æ€§å¯¹æ¯”

| ç‰¹æ€§ | Fragment | Compose | ä¸€è‡´æ€§ |
|------|----------|---------|--------|
| æ•´ä½“å¸ƒå±€ | ScrollView + LinearLayout | DebugContent + Column | âœ… ä¸€è‡´ |
| çŠ¶æ€ä¿¡æ¯ä½ç½® | é¡¶éƒ¨ | é¡¶éƒ¨ | âœ… ä¸€è‡´ |
| æµ‹è¯•æ–‡æœ¬è¾“å…¥ | EditText | OutlinedTextField | âœ… ä¸€è‡´ |
| å¼•å¯¼æç¤ºæ ·å¼ | çº¢è‰²æ–‡å­— | çº¢è‰²æ–‡å­— | âœ… ä¸€è‡´ |
| æŒ‰é’®æ’åˆ—æ–¹å¼ | æˆå¯¹æ°´å¹³æ’åˆ— | æˆå¯¹æ°´å¹³æ’åˆ— | âœ… ä¸€è‡´ |
| é—´è·è®¾ç½® | 20dp padding | 20dp padding | âœ… ä¸€è‡´ |
| æŒ‰é’®æ–‡å­— | å®Œå…¨ç›¸åŒ | å®Œå…¨ç›¸åŒ | âœ… ä¸€è‡´ |
| é»˜è®¤æµ‹è¯•æ–‡æœ¬ | ç‰¹æ®Šå­—ç¬¦æµ‹è¯• | ç‰¹æ®Šå­—ç¬¦æµ‹è¯• | âœ… ä¸€è‡´ |

---

## ğŸš€ ç¼–è¯‘æµ‹è¯•ç»“æœ

### BaseDebugCompose æ¨¡å—
```bash
./gradlew :BaseDebugCompose:assembleDebug
BUILD SUCCESSFUL in 4s
482 actionable tasks: 5 executed, 477 up-to-date
```

### BaseDebug æ¨¡å—
```bash
./gradlew :BaseDebug:assembleDebug
BUILD SUCCESSFUL in 6s
506 actionable tasks: 12 executed, 494 up-to-date
```

### æ•´ä¸ªé¡¹ç›®
```bash
./gradlew :APPTest:assembleDebug
BUILD SUCCESSFUL in 9s
893 actionable tasks: 11 executed, 882 up-to-date
```

---

## ğŸ“¦ ä¿®æ”¹çš„æ–‡ä»¶

1. `/BaseDebugCompose/src/main/java/com/bihe0832/android/base/compose/debug/tts/DebugTTSBasicView.kt`
   - é‡æ„å¸ƒå±€ç»“æ„ï¼Œä½¿ç”¨ Row + Column ç»„åˆ
   - è°ƒæ•´é—´è·å’Œæ ·å¼ï¼Œä¸åŸå§‹ Fragment ä¿æŒä¸€è‡´
   - ä¿®å¤ null å‚æ•°é—®é¢˜

2. `/BaseDebug/src/main/java/com/bihe0832/android/base/debug/tts/DebugTTSBasicFragment.kt`
   - ä¿®å¤ null å‚æ•°é—®é¢˜ï¼ˆTTS å¼•æ“å‚æ•°ï¼‰

---

## ğŸ¯ æ€»ç»“

é€šè¿‡æœ¬æ¬¡è¿ç§»ï¼ŒæˆåŠŸå°† `DebugTTSBasicFragment` çš„ UI å¸ƒå±€å®Œæ•´è¿ç§»åˆ° Compose ç‰ˆæœ¬ï¼Œä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š

1. **å¸ƒå±€ä¸€è‡´æ€§**ï¼šä½¿ç”¨ Row + Column ç»„åˆï¼Œå®Œç¾è¿˜åŸåŸå§‹ Fragment çš„å¸ƒå±€
2. **ä»£ç ç®€æ´æ€§**ï¼šCompose ä»£ç æ›´ç®€æ´ï¼ŒçŠ¶æ€ç®¡ç†æ›´æ¸…æ™°
3. **ç±»å‹å®‰å…¨**ï¼šä¿®å¤äº† null å‚æ•°é—®é¢˜ï¼Œæé«˜äº†ç±»å‹å®‰å…¨æ€§
4. **Material 3**ï¼šä½¿ç”¨ Material 3 ç»„ä»¶ï¼ŒUI æ›´ç°ä»£åŒ–
5. **å“åº”å¼**ï¼šä½¿ç”¨ `LaunchedEffect` å®ç°å“åº”å¼çŠ¶æ€æ›´æ–°

ç°åœ¨ä¸¤ä¸ªç‰ˆæœ¬çš„ UI å¸ƒå±€å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œç”¨æˆ·ä½“éªŒä¿æŒä¸€è‡´ï¼âœ¨

---

**è¿ç§»å®Œæˆæ—¶é—´**: 2025-12-12  
**å¼€å‘è€…**: zixie code@bihe0832.com
